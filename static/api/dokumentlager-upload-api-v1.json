{
  "swagger" : "2.0",
  "info" : {
    "version" : "v1",
    "title" : "KS FIKS: Dokumentlager Upload Service",
    "contact" : {
      "name" : "Fiks brukerst√∏tte",
      "url" : "http://www.ks.no/fagomrader/utvikling/digitalisering/digitaliseringsstrategien/fiks/",
      "email" : "fiks@ks.no"
    }
  },
  "basePath" : "/api",
  "tags" : [ {
    "name" : "DokumentlagerUpload"
  }, {
    "name" : "KontoConfiguration"
  } ],
  "schemes" : [ "https" ],
  "paths" : {
    "/dokumentlager/api/v1/{fiksOrganisasjonId}/kontoer" : {
      "get" : {
        "tags" : [ "KontoConfiguration" ],
        "summary" : "Gets all kontoer for the dokumentlagertjeneste of the given Fiks organisasjon",
        "description" : "",
        "operationId" : "getAllKontoer",
        "parameters" : [ {
          "name" : "fiksOrganisasjonId",
          "in" : "path",
          "required" : true,
          "type" : "string",
          "format" : "uuid"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "schema" : {
              "$ref" : "#/definitions/KontoerV1"
            }
          }
        }
      },
      "post" : {
        "tags" : [ "KontoConfiguration" ],
        "summary" : "Creates a new konto for the dokumentlagertjeneste of the given Fiks organisasjon",
        "description" : "",
        "operationId" : "createKonto",
        "parameters" : [ {
          "name" : "fiksOrganisasjonId",
          "in" : "path",
          "required" : true,
          "type" : "string",
          "format" : "uuid"
        }, {
          "in" : "body",
          "name" : "body",
          "required" : false,
          "schema" : {
            "$ref" : "#/definitions/KontoCreateRequestV1"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "schema" : {
              "$ref" : "#/definitions/KontoCreateResultV1"
            }
          }
        }
      }
    },
    "/dokumentlager/api/v1/{fiksOrganisasjonId}/kontoer/{kontoId}" : {
      "get" : {
        "tags" : [ "KontoConfiguration" ],
        "summary" : "Gets a konto with all its events",
        "description" : "",
        "operationId" : "getKonto",
        "parameters" : [ {
          "name" : "fiksOrganisasjonId",
          "in" : "path",
          "required" : true,
          "type" : "string",
          "format" : "uuid"
        }, {
          "name" : "kontoId",
          "in" : "path",
          "required" : true,
          "type" : "string",
          "format" : "uuid"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "schema" : {
              "$ref" : "#/definitions/KontoV1"
            }
          }
        }
      },
      "delete" : {
        "tags" : [ "KontoConfiguration" ],
        "summary" : "Deletes the given konto",
        "description" : "",
        "operationId" : "deleteKonto",
        "parameters" : [ {
          "name" : "fiksOrganisasjonId",
          "in" : "path",
          "required" : true,
          "type" : "string",
          "format" : "uuid"
        }, {
          "name" : "kontoId",
          "in" : "path",
          "required" : true,
          "type" : "string",
          "format" : "uuid"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "schema" : {
              "type" : "object"
            }
          }
        }
      },
      "patch" : {
        "tags" : [ "KontoConfiguration" ],
        "summary" : "Updates the konto",
        "description" : "",
        "operationId" : "updateKonto",
        "parameters" : [ {
          "name" : "fiksOrganisasjonId",
          "in" : "path",
          "required" : true,
          "type" : "string",
          "format" : "uuid"
        }, {
          "name" : "kontoId",
          "in" : "path",
          "required" : true,
          "type" : "string",
          "format" : "uuid"
        }, {
          "in" : "body",
          "name" : "body",
          "required" : false,
          "schema" : {
            "$ref" : "#/definitions/KontoUpdateRequestV1"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "schema" : {
              "$ref" : "#/definitions/KontoUpdateResultV1"
            }
          }
        }
      }
    },
    "/dokumentlager/api/v1/{fiksOrganisasjonId}/kontoer/{kontoId}/dokumenter" : {
      "post" : {
        "tags" : [ "DokumentlagerUpload" ],
        "summary" : "Upload metadata",
        "description" : "",
        "operationId" : "uploadMetadata",
        "parameters" : [ {
          "name" : "fiksOrganisasjonId",
          "in" : "path",
          "required" : true,
          "type" : "string",
          "format" : "uuid"
        }, {
          "name" : "kontoId",
          "in" : "path",
          "required" : true,
          "type" : "string",
          "format" : "uuid"
        }, {
          "in" : "body",
          "name" : "body",
          "required" : false,
          "schema" : {
            "$ref" : "#/definitions/FilMetadataUploadV1"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "schema" : {
              "$ref" : "#/definitions/FilMetadataUploadResultV1"
            }
          }
        }
      }
    },
    "/dokumentlager/api/v1/{fiksOrganisasjonId}/kontoer/{kontoId}/dokumenter/{filId}" : {
      "delete" : {
        "tags" : [ "DokumentlagerUpload" ],
        "summary" : "Delete file",
        "description" : "",
        "operationId" : "deleteFile",
        "parameters" : [ {
          "name" : "fiksOrganisasjonId",
          "in" : "path",
          "required" : true,
          "type" : "string",
          "format" : "uuid"
        }, {
          "name" : "kontoId",
          "in" : "path",
          "required" : true,
          "type" : "string",
          "format" : "uuid"
        }, {
          "name" : "filId",
          "in" : "path",
          "required" : true,
          "type" : "string",
          "format" : "uuid"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "schema" : {
              "type" : "object"
            }
          }
        }
      }
    },
    "/dokumentlager/api/v1/{fiksOrganisasjonId}/kontoer/{kontoId}/dokumenter/{filId}/data" : {
      "post" : {
        "tags" : [ "DokumentlagerUpload" ],
        "summary" : "Upload a file with an id received when metadata was uploaded",
        "description" : "",
        "operationId" : "uploadFile",
        "consumes" : [ "multipart/form-data" ],
        "parameters" : [ {
          "name" : "fiksOrganisasjonId",
          "in" : "path",
          "required" : true,
          "type" : "string",
          "format" : "uuid"
        }, {
          "name" : "kontoId",
          "in" : "path",
          "required" : true,
          "type" : "string",
          "format" : "uuid"
        }, {
          "name" : "filId",
          "in" : "path",
          "required" : true,
          "type" : "string",
          "format" : "uuid"
        }, {
          "name" : "file",
          "in" : "formData",
          "required" : true,
          "type" : "file"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "schema" : {
              "type" : "object"
            }
          }
        }
      }
    },
    "/dokumentlager/api/v1/{fiksOrganisasjonId}/kontoer/{kontoId}/filer" : {
      "get" : {
        "tags" : [ "KontoConfiguration" ],
        "summary" : "Gets all filer for a konto",
        "description" : "",
        "operationId" : "getFilerForKonto",
        "parameters" : [ {
          "name" : "fiksOrganisasjonId",
          "in" : "path",
          "required" : true,
          "type" : "string",
          "format" : "uuid"
        }, {
          "name" : "kontoId",
          "in" : "path",
          "required" : true,
          "type" : "string",
          "format" : "uuid"
        }, {
          "name" : "offset",
          "in" : "query",
          "required" : true,
          "type" : "integer",
          "format" : "int32"
        }, {
          "name" : "count",
          "in" : "query",
          "required" : true,
          "type" : "integer",
          "format" : "int32"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "schema" : {
              "$ref" : "#/definitions/FilerV1"
            }
          }
        }
      }
    },
    "/dokumentlager/api/v1/{fiksOrganisasjonId}/kontoer/{kontoId}/filer/{filId}/events" : {
      "get" : {
        "tags" : [ "KontoConfiguration" ],
        "summary" : "Gets all events for a file",
        "description" : "",
        "operationId" : "getMetadataForFil",
        "parameters" : [ {
          "name" : "fiksOrganisasjonId",
          "in" : "path",
          "required" : true,
          "type" : "string",
          "format" : "uuid"
        }, {
          "name" : "kontoId",
          "in" : "path",
          "required" : true,
          "type" : "string",
          "format" : "uuid"
        }, {
          "name" : "filId",
          "in" : "path",
          "required" : true,
          "type" : "string",
          "format" : "uuid"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "schema" : {
              "$ref" : "#/definitions/FilMetadataV1"
            }
          }
        }
      }
    },
    "/dokumentlager/api/v1/{fiksOrganisasjonId}/kontoer/{kontoId}/statistikk" : {
      "get" : {
        "tags" : [ "KontoConfiguration" ],
        "summary" : "Gets statistikk for a konto",
        "description" : "",
        "operationId" : "getStatistikkForKonto",
        "parameters" : [ {
          "name" : "fiksOrganisasjonId",
          "in" : "path",
          "required" : true,
          "type" : "string",
          "format" : "uuid"
        }, {
          "name" : "kontoId",
          "in" : "path",
          "required" : true,
          "type" : "string",
          "format" : "uuid"
        } ],
        "responses" : {
          "200" : {
            "description" : "successful operation",
            "schema" : {
              "$ref" : "#/definitions/KontoStatistikkV1"
            }
          }
        }
      }
    }
  },
  "definitions" : {
    "EventV1" : {
      "type" : "object",
      "properties" : {
        "timestamp" : {
          "type" : "string"
        },
        "message" : {
          "type" : "string"
        },
        "aktor" : {
          "type" : "string"
        }
      }
    },
    "FilMetadataUploadResultV1" : {
      "type" : "object",
      "properties" : {
        "id" : {
          "type" : "string",
          "format" : "uuid"
        }
      }
    },
    "FilMetadataUploadV1" : {
      "type" : "object",
      "properties" : {
        "filnavn" : {
          "type" : "string"
        },
        "mimetype" : {
          "type" : "string"
        },
        "ttl" : {
          "type" : "integer",
          "format" : "int64"
        },
        "eksponertFor" : {
          "type" : "array",
          "uniqueItems" : true,
          "items" : {
            "type" : "string"
          }
        }
      }
    },
    "FilMetadataV1" : {
      "type" : "object",
      "properties" : {
        "id" : {
          "type" : "string",
          "format" : "uuid"
        },
        "navn" : {
          "type" : "string"
        },
        "storrelse" : {
          "type" : "integer",
          "format" : "int64"
        },
        "timestamp" : {
          "type" : "string"
        },
        "events" : {
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/EventV1"
          }
        }
      }
    },
    "FilerV1" : {
      "type" : "object",
      "properties" : {
        "filer" : {
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/FilMetadataV1"
          }
        }
      }
    },
    "KontoCreateRequestV1" : {
      "type" : "object",
      "properties" : {
        "navn" : {
          "type" : "string"
        }
      }
    },
    "KontoCreateResultV1" : {
      "type" : "object",
      "properties" : {
        "id" : {
          "type" : "string",
          "format" : "uuid"
        },
        "navn" : {
          "type" : "string"
        }
      }
    },
    "KontoStatistikkV1" : {
      "type" : "object",
      "properties" : {
        "antallMetadata" : {
          "type" : "integer",
          "format" : "int64"
        },
        "antallFiler" : {
          "type" : "integer",
          "format" : "int64"
        },
        "totalStorrelse" : {
          "type" : "integer",
          "format" : "int64"
        }
      }
    },
    "KontoUpdateRequestV1" : {
      "type" : "object",
      "properties" : {
        "navn" : {
          "type" : "string"
        }
      }
    },
    "KontoUpdateResultV1" : {
      "type" : "object",
      "properties" : {
        "id" : {
          "type" : "string",
          "format" : "uuid"
        },
        "navn" : {
          "type" : "string"
        }
      }
    },
    "KontoV1" : {
      "type" : "object",
      "properties" : {
        "id" : {
          "type" : "string",
          "format" : "uuid"
        },
        "navn" : {
          "type" : "string"
        },
        "fiksOrganisasjonId" : {
          "type" : "string",
          "format" : "uuid"
        },
        "events" : {
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/EventV1"
          }
        }
      }
    },
    "KontoerV1" : {
      "type" : "object",
      "properties" : {
        "kontoer" : {
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/KontoV1"
          }
        }
      }
    }
  }
}